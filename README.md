# 文件加密/解密工具

一个用C语言开发的命令行工具，用于加密和解密文件。

## 功能特性

- **自动识别模式**: 根据输入文件扩展名自动判断加密或解密
  - 普通文件 → 加密为 `.fds` 格式
  - `.fds` 文件 → 解密为原始文件

- **加密算法**: 基于密码的流密码加密
  - **选择理由**: 
    - 流密码适合文件加密，支持任意大小文件，无需填充
    - 不依赖外部库（如OpenSSL），便于编译和跨平台使用
    - 实现简单，代码可读性强，适合学习和理解加密原理
    - 使用XOR操作，加密和解密使用相同算法，实现对称
  - **技术细节**:
    - 使用流密码（XOR + 线性同余生成器）进行加密
    - 自定义密钥派生函数（基于密码和salt，1000次迭代哈希）
    - 每个文件使用随机salt（16字节），确保相同文件加密结果不同
    - 密钥流基于密钥、salt和位置生成，确保每个字节位置都有唯一密钥流
  - **注意**: 这是教育/演示用途的加密方案。对于高安全性需求，建议使用AES等工业标准加密算法

## 编译

### 前提条件
- GCC编译器（无需其他依赖库）

### Linux/macOS
```bash
make
```

### Windows
```bash
# 使用MinGW或MSYS2
gcc -Wall -Wextra -O2 -o encoder.exe encoder.c
```

### 手动编译
```bash
gcc -Wall -Wextra -O2 -o encoder encoder.c
```

## 使用方法

### 基本用法

```bash
# 加密文件（自动添加.fds扩展名）
./encoder document.txt

# 解密文件（自动移除.fds扩展名）
./encoder document.txt.fds

# 指定输出文件名
./encoder input.txt output.fds
./encoder input.fds output.txt
```

### 示例

```bash
# 加密一个文本文件
./encoder secret.txt
# 输入密码后，生成 secret.txt.fds

# 解密文件
./encoder secret.txt.fds
# 输入密码后，生成 secret.txt
```

## 文件格式

`.fds` 文件格式：
- 前16字节: Salt（用于密钥派生）
- 剩余部分: 流密码加密的数据

## 安全说明

- 使用强密码以确保安全性
- 密码不会保存在文件中
- 丢失密码将无法恢复文件
- 每个文件使用唯一的salt
- **重要**: 本工具使用简化的加密方案，适合一般用途。对于高安全性需求，建议使用AES等工业标准加密算法

## 依赖

- 无外部依赖（仅需标准C库）

## 许可证

本项目为示例代码，可自由使用和修改。

